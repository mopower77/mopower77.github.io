---
layout: post
title:  "wiredTiger 내부 작동 방식"
summary: "MongoDB의 wiredTiger 스토리지 엔진"
author: mopower77
date: '2021-04-30'
category: mongodb
thumbnail: /assets/img/mongo/wired.png
---

## 저널로그
 - 데이터 상태가 변경될 때(트랜잭션이 발동 할 때)저장되는 데이터
 - 비정상적 서버 종료로부터 데이터 복구를 하는 용도로 사용
 - 체크포인트 발생 시점을 기준으로 이전 데이터들은 삭제

## 공유캐시(Buffer Pool)
 - 모든 요청은 공유캐시를 통한다.
 - 조회및 상태 변경시에 데이터 페이지 단위로 공유캐시에 담긴다.

## 리컨실리에이션
 - 소스병합처럼 변경된 데이터를 병합하는 작업을한다.

## 이빅션
 - 일종의 가비지 컬렉션과 비슷한 개념으로 공유캐시에 사용되고있지 않는 데이터를 제거하는 작업

## 체크포인트
 - 주기적으로 저널로그와 디스크의 데이터파일을 동기화 하는 작업.
    1. 체크포인트 발생.
    2. 체크포인트 발생 시점에서의 저널로그에 기록된 로그데이터와 데이터 파일을 동기화한다.
    3. 변경된 데이터들은 리컨실리에이션에서 병합작업 후 디스크저장.
    4. 동기화 시점을 기준으로 이전 저널로그 삭제.
 
## 블록매니저
 - 데이터를 압축 및 압축해제를 담당
 - 디스크에 데이터를 압축 한 뒤 저장
 - 공유캐시에는 압축된 데이터를 압축해제 한 뒤 저장



 
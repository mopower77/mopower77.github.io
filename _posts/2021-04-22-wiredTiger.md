---
layout: post
title:  "MongoDB wiredTiger 특징"
summary: "MongoDB의 wiredTiger 스토리지 엔진"
author: mopower77
date: '2021-04-22'
category: mongodb
thumbnail: /assets/img/posts/hello.jpg
---

### 특징
 - wiredTiger 엔진을 도입하기 이전에 MMAPv1엔진을 사용하였으나 범용적으로 사용하기에는 많은 문제점이 있어 이를 보안하기 위해 나온 엔진이다.
 - 내부적인 잠금 경합 최소화를 위해 하자드 포인터나 스킵 리스트와 같은 신기술을 채택하고 있으며 MVCC와 데이터 파일 압축 암호화기능을 가지고 있다.

### 하자드 포인터(Hazard Pointer)
 - 사용자 쓰레드: 사용자의 쿼리를 처리하는 쓰레드
 - 이빅션 쓰레드: 버퍼풀(캐시)에 공간을 만들어 주는 역할을 하는 쓰레드

  사용자가 쿼리를 요청하면 버퍼풀(캐시)에서 데이터를 참조하게 되는데 이때 참조하는 데이터 페이지를 하자드 포인터에 등록한다.
  동시에 이빅션 쓰레드는 버러풀(캐시)에 빈공간을 만들기 위해 사용되지 않는 페이지들을 제거하는 작업을 하는데 이때 하자의 포인터에 등록된 데이터페이지들은 무시하기 제거한다.
  여기서 핵심은 다양한 쓰레드들이 버퍼풀(캐시)의 데이터 페이지들에 대해서 잠금 대기 없이 각자의 임무를 수행 할 수 있따는 것이다.

  하자드 포인터의 개수는 최대 1000개 이상으로 설정 할 수 있으며 최소값은 15 기본값은 1000 이다.
### 스킵리스트

### MVCC